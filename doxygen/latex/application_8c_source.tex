\doxysection{application.\+c}
\hypertarget{application_8c_source}{}\label{application_8c_source}\index{source/application/application.c@{source/application/application.c}}
\mbox{\hyperlink{application_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00001}00001\ \textcolor{preprocessor}{\#include<\mbox{\hyperlink{logger_8h}{viper/debug/logger.h}}>}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00002}00002\ \textcolor{preprocessor}{\#include<\mbox{\hyperlink{types_8h}{viper/types.h}}>}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00003}00003\ \textcolor{preprocessor}{\#include<\mbox{\hyperlink{stringer_8h}{viper/utils/stringer.h}}>}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00004}00004\ \textcolor{preprocessor}{\#include<\mbox{\hyperlink{application_8h}{viper/application/application.h}}>}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00005}00005\ \textcolor{preprocessor}{\#include<\mbox{\hyperlink{opengl_2init_8h}{viper/opengl/init.h}}>}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00006}00006\ \textcolor{preprocessor}{\#include<\mbox{\hyperlink{vulkan_2init_8h}{viper/vulkan/init.h}}>}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00007}00007\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00011}\mbox{\hyperlink{application_8c_a04a58062fa11da9325f74f4b1dc9129f}{00011}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{application_8c_a04a58062fa11da9325f74f4b1dc9129f}{\_\_ViperEmptyLoopNoCall}}(\mbox{\hyperlink{struct____ViperApplication__t}{ViperApplication\_t}}*\ app)\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00012}00012\ \}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00014}\mbox{\hyperlink{application_8c_a23a4ea5ff2f99f420154edd0bd430e96}{00014}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{application_8c_a23a4ea5ff2f99f420154edd0bd430e96}{\_\_ViperRenderLoopNoCall}}(\mbox{\hyperlink{struct____ViperApplication__t}{ViperApplication\_t}}*\ app)\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00015}00015\ \ \ \ \ \textcolor{keywordflow}{if}\ (glfwWindowShouldClose(app-\/>\mbox{\hyperlink{struct____ViperApplication__t_a2c0fdd1051ba2ee35314f5db17bc65d5}{opengl}}-\/>\mbox{\hyperlink{structViperOpenGL__t_aa1a8b88ecd56d9f4e7edd9f015d03b25}{window}}.\mbox{\hyperlink{structViperGLFWwindow__t_a392bc3e0b9b5f8d6a899f06b85fbaeff}{data}}))\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00016}00016\ \ \ \ \ \ \ \ \ app-\/>\mbox{\hyperlink{struct____ViperApplication__t_a95bde4ad5bd963a0234be5b5ac6a03dc}{status}}\ =\ \mbox{\hyperlink{types_8h_adf764cbdea00d65edcd07bb9953ad2b7ad641da61b25cbb3f4811398d4e32d2c5}{VIPER\_APPLICATION\_STATUS\_EXIT}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00017}00017\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00018}00018\ \ \ \ \ glfwPollEvents();}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00019}00019\ \}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00029}\mbox{\hyperlink{application_8c_a0c543a8e5dd08012907f3bc139c05826}{00029}}\ \textcolor{keyword}{static}\ void\ (*\mbox{\hyperlink{application_8c_a0c543a8e5dd08012907f3bc139c05826}{\_\_ViperRenderLoop}})(\mbox{\hyperlink{struct____ViperApplication__t}{ViperApplication\_t}}*\ app)\ =\ \&\mbox{\hyperlink{application_8c_a04a58062fa11da9325f74f4b1dc9129f}{\_\_ViperEmptyLoopNoCall}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00030}00030\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00036}\mbox{\hyperlink{application_8c_aeda2eb8880244f7342748b8ab3493a7d}{00036}}\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{application_8c_aeda2eb8880244f7342748b8ab3493a7d}{\_\_ViperApplicationLoop}}(\mbox{\hyperlink{struct____ViperApplication__t}{ViperApplication\_t}}*\ app)\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00037}00037\ \ \ \ \ \textcolor{keywordflow}{while}\ (app-\/>\mbox{\hyperlink{struct____ViperApplication__t_a95bde4ad5bd963a0234be5b5ac6a03dc}{status}})\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00038}00038\ \ \ \ \ \ \ \ \ glfwPollEvents();}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00039}00039\ \ \ \ \ \ \ \ \ app-\/>\mbox{\hyperlink{struct____ViperApplication__t_a98a4602c0124eae422980ad805118620}{applicationLoop}}(app);}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00040}00040\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{application_8c_a0c543a8e5dd08012907f3bc139c05826}{\_\_ViperRenderLoop}}(app);}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00041}00041\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00042}00042\ \}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00043}00043\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00051}\mbox{\hyperlink{application_8h_a838a4158c52377694eb2c7954a2d8ccb}{00051}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{application_8c_a838a4158c52377694eb2c7954a2d8ccb}{ViperApplicationCreate}}(\mbox{\hyperlink{struct____ViperApplication__t}{ViperApplication\_t}}*\ app,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structViperApplicationCreateInfo__t}{ViperApplicationCreateInfo\_t}}*\ info)\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00052}00052\ \ \ \ \ *app\ =\ (\mbox{\hyperlink{types_8h_a4fb5e22972ee516b10fe09435f17b730}{ViperApplication\_t}})\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00053}00053\ \ \ \ \ \ \ \ \ .\mbox{\hyperlink{struct____ViperApplication__t_a07c58991988b3ac3d47d06ad72cfb408}{sType}}\ =\ \mbox{\hyperlink{structs_8h_a16af7b253440dadd46a80a4b9fddba4dabc211ce419ec03d21f394a1bb5cbf542}{VIPER\_STRUCTURE\_TYPE\_APPLICATION}},}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00054}00054\ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00055}00055\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00056}00056\ \ \ \ \ \textcolor{keywordflow}{if}\ (NULL\ ==\ info-\/>\mbox{\hyperlink{structViperApplicationCreateInfo__t_a06e7ad67df9e26c14ab340c84d1f709f}{applicationLoop}})\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00057}00057\ \ \ \ \ \ \ \ \ app-\/>\mbox{\hyperlink{struct____ViperApplication__t_a98a4602c0124eae422980ad805118620}{applicationLoop}}\ =\ \&\mbox{\hyperlink{application_8c_a04a58062fa11da9325f74f4b1dc9129f}{\_\_ViperEmptyLoopNoCall}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00058}00058\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00059}00059\ \ \ \ \ \ \ \ \ app-\/>\mbox{\hyperlink{struct____ViperApplication__t_a98a4602c0124eae422980ad805118620}{applicationLoop}}\ =\ info-\/>\mbox{\hyperlink{structViperApplicationCreateInfo__t_a06e7ad67df9e26c14ab340c84d1f709f}{applicationLoop}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00060}00060\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00061}00061\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00062}00062\ \ \ \ \ \textcolor{keywordflow}{if}\ (0\ >=\ \mbox{\hyperlink{stringer_8h_a3fa85487883e41001fab7582106f6596}{ViperStringCreate}}(\&app-\/>\mbox{\hyperlink{struct____ViperApplication__t_a10623b6ca6dca547b1e2cd22da1f8c6e}{name}},\ info-\/>\mbox{\hyperlink{structViperApplicationCreateInfo__t_a8f8f80d37794cde9472343e4487ba3eb}{name}}))\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00063}00063\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8h_a2ff2a5cee8d0a4833468785e801af403}{ViperLogError}}(\textcolor{stringliteral}{"{}Failed\ to\ create\ string"{}});}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00064}00064\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ ERROR\_EXIT;}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00065}00065\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00066}00066\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00067}00067\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{types_8h_a217c7bc4ccd55d5fbcbadbef4fe65d36}{VIPER\_APPLICATION\_FLAG\_GRAPHICS\_VULKAN}}\ \&\ info-\/>\mbox{\hyperlink{structViperApplicationCreateInfo__t_a899a76dc5f03f0d4ea3793c339e07ee9}{flags}})\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00068}00068\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (0\ !=\ \mbox{\hyperlink{vulkan_2init_8h_a2f2b80ad70f481e0005837ded2f4345c}{ViperVulkanInit}}(app,\ app-\/>\mbox{\hyperlink{struct____ViperApplication__t_a2a5250a60fa89c1adb625489ca8b317a}{vulkan}}))\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00069}00069\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8h_a2ff2a5cee8d0a4833468785e801af403}{ViperLogError}}(\textcolor{stringliteral}{"{}Failed\ to\ VulkanInit"{}});}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00070}00070\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ ERROR\_EXIT;}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00071}00071\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00072}00072\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00073}00073\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{application_8c_a0c543a8e5dd08012907f3bc139c05826}{\_\_ViperRenderLoop}}\ =\ \&\mbox{\hyperlink{application_8c_a23a4ea5ff2f99f420154edd0bd430e96}{\_\_ViperRenderLoopNoCall}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00074}00074\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{types_8h_a5fce6355f603af3b4e871760b74513c0}{VIPER\_APPLICATION\_FLAG\_GRAPHICS\_OPENGL}}\ \&\ info-\/>\mbox{\hyperlink{structViperApplicationCreateInfo__t_a899a76dc5f03f0d4ea3793c339e07ee9}{flags}})\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00075}00075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (0\ !=\ \mbox{\hyperlink{opengl_2init_8h_ab3d7cebd5b963f78d9c6c7d2e0bc844c}{ViperOpenGLInit}}(app,\ app-\/>\mbox{\hyperlink{struct____ViperApplication__t_a2c0fdd1051ba2ee35314f5db17bc65d5}{opengl}}))\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00076}00076\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8h_a2ff2a5cee8d0a4833468785e801af403}{ViperLogError}}(\textcolor{stringliteral}{"{}Failed\ to\ OpenGLInit"{}});}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00077}00077\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{goto}\ ERROR\_EXIT;}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00078}00078\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00079}00079\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00080}00080\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{application_8c_a0c543a8e5dd08012907f3bc139c05826}{\_\_ViperRenderLoop}}\ =\ \&\mbox{\hyperlink{opengl_2init_8h_a70a2ceac357be902f7f570b50af5babd}{ViperRenderLoopOpenGL}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00081}00081\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00082}00082\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{logger_8h_a7571e212356ea06899894b48d8c0d00b}{ViperLogDebug}}(\textcolor{stringliteral}{"{}Graphics\ flag\ not\ set"{}});}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00083}00083\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00084}00084\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00085}00085\ \ \ \ \ app-\/>\mbox{\hyperlink{struct____ViperApplication__t_a95bde4ad5bd963a0234be5b5ac6a03dc}{status}}\ =\ \mbox{\hyperlink{types_8h_adf764cbdea00d65edcd07bb9953ad2b7ade0c52ca6649c20cacfee951c655da96}{VIPER\_APPLICATION\_STATUS\_RUNNING}};}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00086}00086\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00087}00087\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00088}00088\ ERROR\_EXIT:}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00089}00089\ \ \ \ \ \textcolor{keywordflow}{return}\ -\/1;}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00090}00090\ \}}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00091}00091\ }
\DoxyCodeLine{\Hypertarget{application_8c_source_l00092}\mbox{\hyperlink{application_8h_a9851f22e4e26e711e734935610dc9cce}{00092}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{application_8c_a9851f22e4e26e711e734935610dc9cce}{ViperApplicationStart}}(\mbox{\hyperlink{struct____ViperApplication__t}{ViperApplication\_t}}*\ app)\ \{}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00093}00093\ \ \ \ \ \mbox{\hyperlink{application_8c_aeda2eb8880244f7342748b8ab3493a7d}{\_\_ViperApplicationLoop}}(app);}
\DoxyCodeLine{\Hypertarget{application_8c_source_l00094}00094\ \}}

\end{DoxyCode}
